{"version":3,"sources":["components/Nav/Nav.js","actions/index.js","components/Search/Loader/Loader.js","components/Search/Search.js","components/Card/Card.js","components/CardList/CardList.js","components/RecentList/RecentList.js","components/App.js","reducers/index.js","index.js"],"names":["Nav","className","React","Component","FETCH_DATA","START_LOADING","CLEAR_RECENT","Loader","Search","state","query","this","setState","search","console","log","ToastsStore","info","props","startLoading","fetchQuery","placeholder","type","onChange","event","setQuery","target","value","onKeyPress","key","onClick","loading","store","connect","result","dispatch","apiUrl","axios","get","then","response","data","catch","error","Card","name","main","wind","sys","clouds","temp","temp_max","toFixed","weather","country","src","toLowerCase","alt","style","color","all","speed","humidity","_","isNil","list","map","item","index","recent","App","display","justifyContent","background","clearRecent","combineReducers","action","find","id","unshift","length","pop","localStorage","setItem","JSON","stringify","removeItem","getItem","parse","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8fdf3308.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./Nav.css\";\n\nclass Nav extends React.Component {\n  render() {\n    return <div className=\"nav mb3 shadow-5\">React Weather App</div>;\n  }\n}\n\nexport default Nav;\n","import axios from \"axios\";\nexport const FETCH_DATA = \"FETCH_DATA\";\nexport const START_LOADING = \"START_LOADING\";\nexport const CLEAR_RECENT = \"CLEAR_RECENT\";\n\nexport const fetchData = data => {\n  return {\n    type: FETCH_DATA,\n    data,\n  };\n};\n\nexport const clearRecent = () => {\n  return {\n    type: CLEAR_RECENT,\n  };\n};\n\nexport function startLoading() {\n  return {\n    type: START_LOADING,\n  };\n}\n\nexport const fetchQuery = query => {\n  return dispatch => {\n    const apiUrl = `https://openweathermap.org/data/2.5/find?q=${query}&type=like&sort=population&cnt=30&appid=b6907d289e10d714a6e88b30761fae22`;\n    return axios\n      .get(apiUrl)\n      .then(response => {\n        console.log(\"fetch res is \", response);\n        dispatch(fetchData(response.data));\n      })\n      .catch(error => {\n        throw error;\n      });\n  };\n};\n","import React from \"react\";\nimport \"./Loader.css\";\n\nclass Loader extends React.Component {\n  render() {\n    return (\n        <div className=\"loader shadow-1\"></div>\n    );\n  }\n}\n\nexport default Loader;\n","import React from \"react\";\nimport \"./Search.css\";\nimport { connect } from \"react-redux\";\nimport { ToastsContainer, ToastsStore } from \"react-toasts\";\nimport _ from \"lodash\";\n\nimport { fetchQuery, startLoading } from \"../../actions\";\nimport Loader from \"./Loader/Loader\";\n\nclass Search extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      query: \"\",\n    };\n  }\n\n  setQuery(query) {\n    this.setState({ query });\n  }\n\n  async search() {\n    const search = this.state.query;\n    console.log(search);\n    if (search === \"\") {\n      ToastsStore.info(\"Search cannot be empty!\");\n    } else {\n      await this.props.startLoading();\n      this.props.fetchQuery(search);\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"container pa2 br4\">\n          <input\n            className=\"inp shadow-5 w-60\"\n            placeholder=\"city or zipcode\"\n            type=\"search\"\n            onChange={event => this.setQuery(event.target.value)}\n            \n            onKeyPress={event => {\n              if (event.key === \"Enter\") {\n                this.search();\n              }\n            }}\n          />\n\n          <button\n            onClick={() => this.search()}\n            className=\"btn ml2 shadow-5 pa2 grow\"\n          >\n            Search\n          </button>\n        </div>\n\n        {this.props.loading ? (\n          <div className=\"loaderContainer\">\n            <Loader />\n          </div>\n        ) : (\n          <div className=\"loaderContainer pa4\"></div>\n        )}\n        <ToastsContainer store={ToastsStore} />\n\n        {/* {this.props.result.list &&\n        !_.isNil(this.props.result.message) &&\n        _.isEmpty(this.props.result.list)\n          ? ToastsStore.warning(\"No Result\")\n          : \"\"} */}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    result: state.result,\n    loading: state.loading,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  { fetchQuery, startLoading }\n)(Search);\n","import React from \"react\";\nimport \"./Card.css\";\n\nclass Card extends React.Component {\n  render() {\n    const { name, main, wind, sys, clouds } = this.props.value;\n    // kelvin to celcius\n    if(main.temp > 273) {\n      main.temp_max = (main.temp_max - 273.15).toFixed(1);\n      main.temp = (main.temp - 273.15).toFixed(1);\n    }\n\n    const weather = this.props.value.weather[0];\n    return (\n      <div className=\"card pa1 br3\">\n        <span className=\"name f6\">\n          {name}, {sys.country}\n          <img\n            className=\"ml2 mr2\"\n            src={`http://openweathermap.org/images/flags/${sys.country.toLowerCase()}.png`}\n            alt=\"country\"\n          />\n          <span style={{ color: \"lightblue\" }} className=\"badge f7 mr2\">\n            {main.temp} °С\n          </span>\n          {weather.main}\n        </span>\n        <span className=\"detail f6\">\n          <span className=\"minmax br4\">\n            <span className=\"f6\">\n              Max temp: <span className=\"badge f7\">{main.temp_max} °С</span>{\" \"}\n            </span>\n            <span className=\"f6\">Clouds : {clouds.all}%</span>\n          </span>\n          <br />\n\n          <span className=\"minmax br4\">\n            <span className=\"f6\"> Wind: {wind.speed} m/s </span>\n            <span className=\"f6\"> Humidity : {main.humidity} </span>\n          </span>\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default Card;\n","import React from \"react\";\nimport \"./CardList.css\";\nimport Card from \"../Card/Card\";\nimport { connect } from \"react-redux\";\nimport _ from \"lodash\";\nclass Nav extends React.Component {\n  render() {\n    console.log(\"cardlist props\", this.props);\n    return (\n      <div className=\"cList\">\n        {\n          !_.isNil(this.props.result.list) &&\n          this.props.result.list.map((item, index) => {\n            return <Card key={index} value={item} />;\n          })\n        }\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    result: state.result,\n    // loading: state.loading,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  null\n)(Nav);\n","import React from \"react\";\nimport _ from \"lodash\";\nimport \"./RecentList.css\";\nimport Card from \"../Card/Card\";\nimport { connect } from \"react-redux\";\n\nclass Nav extends React.Component {\n  render() {\n    console.log(\"recent props\", this.props);\n    return (\n      <div className=\"rList\">\n        {!_.isNil(this.props.recent) &&\n          this.props.recent.map((item, index) => {\n            return <Card key={index} value={item} />;\n          })}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    recent: state.recent,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  null\n)(Nav);\n","import React from \"react\";\nimport \"./App.css\";\nimport { connect } from \"react-redux\";\nimport Nav from \"./Nav/Nav\";\nimport Search from \"./Search/Search\";\nimport CardList from \"./CardList/CardList\";\nimport RecentList from \"./RecentList/RecentList\";\nimport {clearRecent} from \"../actions\";\nclass App extends React.Component {\n  render() {\n    return (\n      <div>\n        <Nav />\n        <Search />\n        <CardList />\n        <div className=\"main\">\n          <span\n            className=\"pa2 f5\"\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              color: \"lightblue\",\n              background: \"black\",\n            }}\n          >\n            Past Searches:\n            <p onClick={()=>this.props.clearRecent()} className=\"f5 grow\">Clear </p>\n          </span>\n          <RecentList />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(null,{clearRecent})(App);\n","import { combineReducers } from \"redux\";\nimport { FETCH_DATA, START_LOADING, CLEAR_RECENT } from \"../actions\";\nimport _ from \"lodash\";\nfunction result(state = {}, action) {\n  switch (action.type) {\n    case FETCH_DATA:\n      return action.data;\n    default:\n      return state;\n  }\n}\n\nfunction loading(state = false, action) {\n  switch (action.type) {\n    case START_LOADING: // when search button is clicked loading is set to true\n      return true;\n    case FETCH_DATA: // when data is fetched loading is set to false\n      return false;\n    default:\n      return state;\n  }\n}\n\nfunction recent(state = [], action) {\n  switch (action.type) {\n    case FETCH_DATA:\n      const data = action.data.list[0];\n      console.log(\"recent data is\", data);\n      if (_.isNil(data)) return state;\n      if (\n        state.find(item => {\n          return item.id === data.id;\n        })\n      ) {\n        //already added in recent list\n        return state;\n      }\n      state.unshift(data);\n      if (state.length > 3) state.pop(); // deleting data older than 3 recent searches\n      localStorage.setItem(\"recent\", JSON.stringify(state));\n      return [...state];\n    case CLEAR_RECENT:\n      localStorage.removeItem(\"recent\");\n      return [];\n    default:\n      if (localStorage.getItem(\"recent\")) {\n        state = JSON.parse(localStorage.getItem(\"recent\"));\n      }\n      return state; //building store from recent data saved in local storage\n  }\n}\n\nexport default combineReducers({\n  result,\n  loading,\n  recent,\n});\n","import React from \"react\";\nimport App from \"./components/App\";\nimport ReactDOM from \"react-dom\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport rootReducer from \"./reducers\";\nimport thunk from \"redux-thunk\";\nimport \"tachyons\";\n\nimport \"font-awesome/css/font-awesome.min.css\";\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(rootReducer, composeEnhancer(applyMiddleware(thunk)));\n//store.subscribe(() => console.log(\"from subscribe\", store.getState()));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}